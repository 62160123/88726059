<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <style>

    .carousel-inner img {
      width: 600px;
      height: 300px;
    }
    </style>
  </head>
  <body>
  
    <div id="demo" class="carousel slide" data-ride="carousel">
  
    <ul class="carousel-indicators" style="width: 6%;">
      <li data-target="#demo" data-slide-to="0" class="active"></li>
      <li data-target="#demo" data-slide-to="1"></li>
      <li data-target="#demo" data-slide-to="2"></li>
    </ul>
  
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="https://sv1.picz.in.th/images/2021/01/06/lkoS31.jpg" width="50px" height="250px">
      </div>
      <div class="carousel-item">
        <img src="https://sv1.picz.in.th/images/2021/01/06/lkl1YQ.jpg" width="50px" height="250px">
      </div>
      <div class="carousel-item">
        <img src="https://sv1.picz.in.th/images/2021/01/07/l3P8X1.png" width="50px" height="250px">
      </div>
    </div>
    
    <a class="carousel-control-prev" href="#demo" data-slide="prev" style="width: 5%;">
      <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#demo" data-slide="next" style="width: 129%;">
      <span class="carousel-control-next-icon"></span>
    </a>
  </div>
    <h3>ค้นหาเพลง<a href="newsong.html">[เพิ่มเพลงใหม่]</a><br/></h3>
    <input type="text" id="name" placeholder="ชื่อเพลงที่ต้องการค้นหา"><br>
    <button onclick="Search()" class="btn btn-primary">ค้นหา</button>
    <div id="show1"></div>
    <div id="show2"></div>
    <script>
        function Search() {
            getjson = JSON.parse(localStorage.getItem("store"));
            data = "";
            count = 0;
            nsong = document.getElementById("name").value;
            

            for(i=0 ; i<getjson.length ; i++){
              if(Number(getjson[i][0].indexOf(nsong)) > -1) {
                count++;
              }
              if(count > 0 && nsong != ""){
                document.getElementById('show1').innerHTML =' <div class="alert alert-success"> <strong> พบ </strong>'+count+' เพลง</div>';
            
                data += "<h5>เพลง "+getjson[i][0]+"</h5><br>";
                data +="<h5>ศิลปิน "+getjson[i][1]+"</h5><br>";
                data += nl2br(getjson[i][2])+"<hr>";
                document.getElementById('show2').innerHTML = data;
              }else{
                document.getElementById('show1').innerHTML =' <div class="alert alert-danger"> <strong> ไม่พบ </strong>เพลง '+nsong+'</div>';

                data = "";
                document.getElementById('show2').innerHTML = data;
              }
             }
            function nl2br(str,is_xhtml){
              var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br />' : '<br>';
              return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1'+breakTag+'$2');
            }
          }
    </script>
</body>
</html>


